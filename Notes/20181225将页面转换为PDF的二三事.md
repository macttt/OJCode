偶尔我们遇见网页返回金融、检测等各类报告页面的需求，公司及个人总会需要将网页的报告打印出来，这个时候就有两种业务情况：
1.用户自己使用Chrome的页面另存为PDF功能;
2.网站方面提供报告PDF本体的下载或者批量下载;
第一种情况就比较简单了，用户自取所需。第二种情况下，则需要考虑自身的网站是动态页面还是静态页面了。如果是静态页面，那么很好办，直接使用wkhtmltopdf插件即可。

------------
wkhtmltopdf是一种将请求得的网页转换为PDF的工具，他本身并不支持Ajax脚本，不会等到Js解析完了之后再生成页面。而这次项目需要生成的报告，每一个元素都是动态元素，所以用wkhtmltopdf会生成空白的PDF文件。因此在动态页面的PDF生成，笔者目前找到两种解决方案:
#
- 方案1:
找到一种可以执行Ajax语句的、带WebKit解析器的命令行浏览器，使用该浏览器下载生成好的整个页面本身。
实际效果是，由于我自身对于浏览器和前端JS代码的不熟悉，始终无法做到Js代码执行完成后将静态的HTML代码传给wkhtmltopdf。
#


- 方案2:
苦于上一个方法无法解决项目最紧要的需求，就开始尝试另一种方法。尝试了若干方法而不得后，发现最方便的方法是使用Chrome浏览器的另存为PDF。于是开始寻找chrome浏览器的调用方法，并最后成功完成包含Ajax请求页面的页面的PDF转换并保存。最主要的就是headless chrome工具，直接模拟浏览器网页请求。这个时候需要在linux（或其他如winNT）服务器中安装**headless Chrome**插件，同时在网页写好PDF输出的CSS样式。
缺点chrome的请求再打印的模式比较耗时，服务器打印并返回数据的时间较长（一般要3秒左右），用户体验比较一般。
