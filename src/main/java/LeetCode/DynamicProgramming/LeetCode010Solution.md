### LeetCode第10题"正则表达式"题目解析

`同时查看typora工具在github上的表现`

##### 题目：

> 给定一个字符串 (`s`) 和一个字符模式 (`p`)。实现支持 `'.'` 和 `'*'` 的正则表达式匹配。

```
'.' 匹配任意单个字符。
'*' 匹配零个或多个前面的元素。
```

匹配应该覆盖**整个**字符串 (`s`) ，而不是部分字符串。

**说明:**

- `s` 可能为空，且只包含从 `a-z` 的小写字母。
- `p` 可能为空，且只包含从 `a-z` 的小写字母，以及字符 `.` 和 `*`。

**示例 1:**

```
输入:
s = "aa"
p = "a"
输出: false
解释: "a" 无法匹配 "aa" 整个字符串。
```

**示例 2:**

```
输入:
s = "mississippi"
p = "mis*is*p*."
输出: false
```



------



### 题解



> 读题：
> 这道题目其实类似于Edit Distance，都是在原有的状态基础上加了一层，
> 使最外层变为""匹配""（空字符串匹配空字符串），即两个空字符串的匹配。

因此在动态规划矩阵 `dp[s.length+1][s.length+1]` 中，有`dp[0][0]=True`，代表：
s = ""并且p=""时，s与p必然匹配(空字符串)。



> 而矩阵中的每一个元素`dp[i][j]`，我们可以这样理解：

`dp[i][j]`表示字符串s的前j-1位与字符串p的前i-1位匹配。

例如:

```
s = "mississippi"
p = "mis*is*p*."
```

那么`dp[4][5]`的意义就是

当`s = "mis",p="mis*"`时，s与p是否匹配，这里的*可表示为1，因此可以匹配，那么`dp[4][5]=True`



> 接下来分析状态的转换过程：

- 当出现#\*（`a*,i*,p*等`）的情况，并且#==sChar[i]时，会有三种可能: 

1.虽然字符相同，但是\*不需要计数，例如s="aab",p="aaa\*b"，

此时`dp[i][j]=dp[i][j-2]; `

2.字符相同，这个\*只记一个数，当前j不计数，例如s="aaab",p="aaa\*b" ，

此时`dp[i][j]=dp[i][j-1];`

3.记两个及以上的数时，取其正上方的状态即可此时`dp[i][j]=dp[i-1][j]` ,因此有

 `dp[i][j] = dp[i][j-2]||dp[i][j-1]||dp[i-1][j];` 

`dp[i][j-2]`表示该'*'字符等价于0个，

`dp[i][j-1]`表示'*'等价于1个，

`dp[i-1][j]`表示'*'等价于多个，

三者取其可能值。

- 当两者此时的字符相等时，或者p的字符为'.'时，即`s.charAt(i-1)==p.charAt(j-1)`时，可以直接由上一步的状态推得：

```java
if(s.charAt(i-1)==p.charAt(j-1)){
  dp[i][j] = dp[i-1][j-1];
}
```

例如当i==3,j==3时，有s.charAt(2) == 'i',p.charAt(2) == 'i'，此时`dp[3][3] =dp[2][2];`

- 当字符不相等时，标 False。



------

### 图示



我们以例题

```
输入:
s = "mississippi"
p = "mis*is*p*."
输出: false
```

的例子来说明状态转移的过程,矩阵  `dp[s.length+1][p.length+1]`如以下表格所示：

|      |      |  0   |  1   |  2   |  3   |  4   |  5   |  6   |  7   |  8   |  9   |  10  |  11  |
| :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |
|      |      |      |  m   |  i   |  s   |  s   |  i   |  s   |  s   |  i   |  p   |  p   |  i   |
|  0   |      |  T   |  F   |  F   |  F   |  F   |  F   |  F   |  F   |  F   |  F   |  F   |  F   |
|  1   |  m   |  F   |  T   |  F   |  F   |  F   |  F   |  F   |  F   |  F   |  F   |  F   |  F   |
|  2   |  i   |  F   |  F   |  T   |  F   |  F   |  F   |  F   |  F   |  F   |  F   |  F   |  F   |
|  3   |  s   |  F   |  F   |  F   |  T   |  F   |  F   |  F   |  F   |  F   |  F   |  F   |  F   |
|  4   |  *   |  F   |  F   |  T   |  T   |  T   |  F   |  F   |  F   |  F   |  F   |  F   |  F   |
|  5   |  i   |  F   |  F   |  F   |  F   |  F   |  T   |  F   |  F   |  F   |  F   |  F   |  F   |
|  6   |  s   |  F   |  F   |  F   |  F   |  F   |  F   |  T   |  F   |  F   |  F   |  F   |  F   |
|  7   |  *   |  F   |  F   |  F   |  F   |  F   |  T   |  T   |  T   |  F   |  F   |  F   |  F   |
|  8   |  p   |  F   |  F   |  F   |  F   |  F   |  F   |  F   |  F   |  F   |  F   |  F   |  F   |
|  9   |  *   |  F   |  F   |  F   |  F   |  F   |  T   |  T   |  T   |  F   |  F   |  F   |  F   |
|  10  |  .   |  F   |  F   |  F   |  F   |  F   |  F   |  T   |  T   |  T   |  F   |  F   |  F   |

由该矩阵可知， `dp[s.length][p.length]`的值为false,故最终输出的结果也为false。





// TODO 进一步图解

![image-20190506160122883](https://github.com/macttt/OJCode/raw/master/src/main/resources/image/image-20190506160122883.png)

